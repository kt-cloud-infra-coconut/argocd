apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ingress-myweb

resources:
  - edit/myweb-svc-deploy-edit.yml
  - login/myweb-svc-deploy-login.yml
  - regist/myweb-svc-deploy-regist.yml
  - php/php-deploy-svc.yml
  - mariadb/mariadb-deploy.yml
  - mariadb/mariadb-pv.yml
  - mariadb/mariadb-pvc.yml
  - ingress-myweb-svc.yml
  - myweb-ingress-rule.yml

configMapGenerator:
# ğŸ‘ˆ Nginx ì„¤ì • íŒŒì¼ ConfigMap ìƒì„±
  - name: nginx-config
    files:
      - default.conf=php/nginx-config.yml

  # ğŸ‘ˆ PHP ì½”ë“œ ConfigMap ìƒì„±
  - name: php-index-file
    files:
      - index.php=php/index.php
      
  - name: login-php
    files:
      - index.php=login/index.php

  - name: edit-php
    files:
      - index.php=edit/index.php

  - name: regist-php
    files:
      - index.php=regist/index.php

generatorOptions:
  disableNameSuffixHash: true
