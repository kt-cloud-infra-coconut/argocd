apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ingress-myweb

resources:
  - edit/myweb-svc-deploy-edit.yml
  - login/myweb-svc-deploy-login.yml
  - regist/myweb-svc-deploy-regist.yml
  - php/php-deploy-svc.yml
  # - php/nginx-config.yml
  - mariadb/mariadb-deploy.yml
  - mariadb/mariadb-pv.yml
  - mariadb/mariadb-pvc.yml
  # - metallb-iprange.yml
  - ingress-myweb-svc.yml
  - myweb-ingress-rule.yml

configMapGenerator:
# ğŸ‘ˆ Nginx ì„¤ì • íŒŒì¼ ConfigMap ìƒì„±
  - name: nginx-config
    files:
      - default.conf=php/nginx-config.yml

  # ğŸ‘ˆ PHP ì½”ë“œ ConfigMap ìƒì„±
  - name: php-index-file
    files:
      - index.php=php/index.php

      
  - name: login-html
    files:
      - index.html=login/index.html

  - name: edit-html
    files:
      - index.html=edit/index.html
  - name: regist-html
    files:
      - index.html=regist/index.html

generatorOptions:
  disableNameSuffixHash: true
